import{c_ as s,dV as l}from"./index-ee55ff1d.js";import{T as c}from"./CryptoWalletConnectionHandler-370ab02a.js";import"./index-62ccd745.js";import"./clsx.m-0e5de09d.js";import"./isAddressEqual-e828a1f3.js";import"./index-47c1cea5.js";function C(d){return s(this,arguments,function*({primaryWallet:o,serializedTransaction:a,iframeClient:e}){let{connector:i}=o,n;try{n=yield i.getSigner()}catch(r){console.error("[CryptoWalletConnectionHandler] failed to get signer",r),e.send("crypto:send-transaction:failed",{error:"Failed to get signer"});return}let t;try{t=c.from(l.decode(a))}catch(r){console.error("[CryptoWalletConnectionHandler] failed to deserialize transaction",r),e.send("crypto:send-transaction:failed",{error:"Failed to deserialize transaction"});return}try{let{signature:r}=yield n.signAndSendTransaction(t);console.log("[CryptoWalletConnectionHandler] txId",r),e.send("crypto:send-transaction:success",{txId:r})}catch(r){console.error("[CryptoWalletConnectionHandler] failed to send transaction",r),e.send("crypto:send-transaction:failed",{error:r.message})}})}export{C as handleSolanaTransaction};
