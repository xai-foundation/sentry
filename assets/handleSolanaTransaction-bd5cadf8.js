import{c_ as s,dV as l}from"./index-eddfa50c.js";import{T as c}from"./CryptoWalletConnectionHandler-c185f81e.js";import"./index-e632b0eb.js";import"./clsx.m-a4961588.js";import"./isAddressEqual-9f5f0d2c.js";import"./index-a49b30c9.js";function C(d){return s(this,arguments,function*({primaryWallet:o,serializedTransaction:a,iframeClient:e}){let{connector:i}=o,n;try{n=yield i.getSigner()}catch(r){console.error("[CryptoWalletConnectionHandler] failed to get signer",r),e.send("crypto:send-transaction:failed",{error:"Failed to get signer"});return}let t;try{t=c.from(l.decode(a))}catch(r){console.error("[CryptoWalletConnectionHandler] failed to deserialize transaction",r),e.send("crypto:send-transaction:failed",{error:"Failed to deserialize transaction"});return}try{let{signature:r}=yield n.signAndSendTransaction(t);console.log("[CryptoWalletConnectionHandler] txId",r),e.send("crypto:send-transaction:success",{txId:r})}catch(r){console.error("[CryptoWalletConnectionHandler] failed to send transaction",r),e.send("crypto:send-transaction:failed",{error:r.message})}})}export{C as handleSolanaTransaction};
