import{c_ as s,dV as l}from"./index-389280d9.js";import{T as c}from"./CryptoWalletConnectionHandler-bada5fec.js";import"./index-ee719482.js";import"./clsx.m-6a7c5b9d.js";import"./isAddressEqual-686f7c76.js";import"./index-ed10a355.js";function C(d){return s(this,arguments,function*({primaryWallet:o,serializedTransaction:a,iframeClient:e}){let{connector:i}=o,n;try{n=yield i.getSigner()}catch(r){console.error("[CryptoWalletConnectionHandler] failed to get signer",r),e.send("crypto:send-transaction:failed",{error:"Failed to get signer"});return}let t;try{t=c.from(l.decode(a))}catch(r){console.error("[CryptoWalletConnectionHandler] failed to deserialize transaction",r),e.send("crypto:send-transaction:failed",{error:"Failed to deserialize transaction"});return}try{let{signature:r}=yield n.signAndSendTransaction(t);console.log("[CryptoWalletConnectionHandler] txId",r),e.send("crypto:send-transaction:success",{txId:r})}catch(r){console.error("[CryptoWalletConnectionHandler] failed to send transaction",r),e.send("crypto:send-transaction:failed",{error:r.message})}})}export{C as handleSolanaTransaction};
